{% from "blocks/header.njk" import header %}
{% from "blocks/footer.njk" import footer with context %}

{% macro articlesList(articles) %}
  <ul class="index-group-list">
    {% for article in articles %}
      <li class="index-group-list__item">
        <a class="index-group-list__link link" href="{{ article.link }}">
          {{ article.title | descriptionMarkdown | safe }}
        </a>
      </li>
    {% endfor %}
  </ul>
{% endmacro %}

<div class="person-page">
  {{ header(
    title=name,
    articleIndexes=collections.articleIndexes
  ) }}

  <main class="person-page__main">
    <div class="person-page__avatar person-page__avatar--placeholder">á´¥</div>

    <div class="person-page__meta">
      <ul>
        <li>Personal Link</li>
        <li>Github Issues</li>
        <li>Github Pull requests</li>
      </ul>
    </div>

    <div class="person-page__header">
      <h1 class="person-page__title">
        {% if url %}
          <a class="link" href="{{ url }}">
            {{ name }}
          </a>
        {% else %}
          {{ name }}
        {% endif %}
      </h1>
      {% if person.templateContent %}
        <div class="person-page__description content">
          {{ person.templateContent | safe }}
        </div>
      {% endif %}
    </div>

    <div class="person-page__articles">
      {% for category, articlesByRole in articlesIndex %}
        <section>
          <h2>{{ category }}</h2>
          {% for personRole, articles in articlesByRole %}
            <section>
              <h3>{{ personRole }}</h3>
              <ul>
                {% for article in articles %}
                  <li>
                    <a href="#404">
                      {{ article.data.title | descriptionMarkdown | safe }}
                    </a>
                  </li>
                {% endfor %}
              </ul>
            </section>
          {% endfor %}
        </section>
      {% endfor %}
    </div>

   {{ footer(class="person-page__footer") }}
  </main>

</div>

